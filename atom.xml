<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[CorgaLabs Blog]]></title>
  <link href="http://cmceniry.github.com/atom.xml" rel="self"/>
  <link href="http://cmceniry.github.com/"/>
  <updated>2012-08-14T00:19:19-07:00</updated>
  <id>http://cmceniry.github.com/</id>
  <author>
    <name><![CDATA[Chris McEniry]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[First pass on clojure-jmxxmppgateway]]></title>
    <link href="http://cmceniry.github.com/blog/2012/08/13/first-pass-on-clojure-jmxxmppgateway/"/>
    <updated>2012-08-13T23:42:00-07:00</updated>
    <id>http://cmceniry.github.com/blog/2012/08/13/first-pass-on-clojure-jmxxmppgateway</id>
    <content type="html"><![CDATA[<p>I&#8217;ve been playing around a bit with clojure. It&#8217;s nice to cut my teeth on somewhat LISP code. I&#8217;m not going to debate a lot of the language merits; I&#8217;m just going to say that I&#8217;m enjoying it.</p>

<p>I dusted off a project that&#8217;s been sitting for a bit as it&#8217;s cropped up again. I&#8217;m doing a lot more java work, and am in need to a JMX manager. Well, more that I&#8217;m in need of a way of accessing a JMX interface.</p>

<p>Originally, I had been using the <a href="http://crawler.archive.org/cmdline-jmxclient/">command-line JMX Client</a>, but I kept running into 2 problems when running that my monitoring instance (had been using cacti + nagios):</p>

<ol>
<li>The startup time for the jvm for the command-line client was too expensive. When attempting to run it against several different servers and several different metric points, it over ran the polling interval.</li>
<li>JMX and firewalls - @wheee.</li>
</ol>


<p>So, I started by translating JMX to the universal application transport protocol: HTTP. The first project is clojure-jmxhttpgateway. It takes a GET with JMXConn=$hostname:$port, JMXBean, and JMXAttribute as parameters, and passes that back to the JMX engine to get the ways and returns it back. It works pretty well, and took out the gaps in my cacti graphs.</p>

<p>That was two years ago. I made a couple of changes recently.</p>

<p>First, I updated the HTTP gateway to use the latest clojure and ring web framework. The second change was a little crazier. I like XMPP, so I figured I&#8217;d see what could come out of it and this is what I got:</p>

<pre><code>8:33:32 PM Chris McEniry: localhost:4270|java.lang:type=Memory|HeapMemoryUsage
8:33:32 PM clj@chriss-macbook-air.local: HeapMemoryUsage : {:committed 85000192, :init 0, :max 129957888, :used 8645872}
</code></pre>

<p>I like clojure. One of the fun parts - it&#8217;s only 79 lines of code for the XMPP gateway. Sure, there&#8217;s not much configurability to it, but that&#8217;s still a lot to do in such a small set. It&#8217;s really just a first pass, but it&#8217;s a fun start.</p>

<p>Some immediate items for the (near?) future:</p>

<ol>
<li>Add security back in - be able to connect to a JMX listener with either SSL enabled and/or user/password auth.</li>
<li>Add write access - currently it&#8217;s only doing reads.</li>
<li>Add a second layer of security - since it aggregates several connections, it needs to restrict who can connect to it/what they can request.</li>
<li>Refactor the utils from the XMPP and HTTP gateways. Right now, there&#8217;s a lot of duplicated code which needs to be pulled out. At the same time, I don&#8217;t want one project that&#8217;s pulls in too many dependencies - e.g. if you&#8217;re only running the HTTP gateway, you shouldn&#8217;t need to get the XMPP libs and vice-versa. In general, the code and just use several cleanups.</li>
<li>Need tests.</li>
<li>Better config files - i.e. fix the XMPP gateway so that it actually uses a config file.</li>
<li>Do the library name spaces &#8220;the proper way&#8221; - i.e. include domain name in them.</li>
</ol>


<p>I think I have my work cut out for me.</p>

<p>If you&#8217;re interested in any of this, check out the github repos:</p>

<ol>
<li><a href="https://github.com/cmceniry/clojure-jmxhttpgateway">https://github.com/cmceniry/clojure-jmxhttpgateway</a></li>
<li><a href="https://github.com/cmceniry/clojure-jmxxmppgateway">https://github.com/cmceniry/clojure-jmxxmppgateway</a></li>
</ol>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[abUser Stories]]></title>
    <link href="http://cmceniry.github.com/blog/2012/04/28/abuser-stories/"/>
    <updated>2012-04-28T10:25:00-07:00</updated>
    <id>http://cmceniry.github.com/blog/2012/04/28/abuser-stories</id>
    <content type="html"><![CDATA[<p>Was just listening to <a href="http://www.pauldotcom.com/">PaulDotCom&#8217;s security podcast</a>
(<a href="http://traffic.libsyn.com/pauldotcom/PaulDotCom-283-Part2.mp3">283</a>)
[NSFW], and they made a comment about &#8220;Abuse Cases.&#8221; I haven&#8217;t dug
into it yet, but I really like the sound of that. Part of it is a bit
tongue in cheek, but there&#8217;s more there. I&#8217;m constantly subjected to
the Use Case and the User Story, and most of the time, those are
feature focused:</p>

<pre><code>As a user, I want to be able to store my data...
</code></pre>

<p>Now, that&#8217;s not always the case, as we&#8217;ve been able to get some others
in there:</p>

<pre><code>As a day-to-day operator, I need to be able to perform
maintenance on a node.
</code></pre>

<p>and</p>

<pre><code>As a day-to-day operator, I need to be able to collect metric X to
see the health of the system.
</code></pre>

<p>So, there&#8217;s definitely credence to the idea of &#8220;Users stories are for
everyone,&#8221; or &#8220;All of use are users,&#8221; so why would we need to use a
different term. Couldn&#8217;t we just say that it&#8217;s all already covered?</p>

<p>Well, there&#8217;s two things that I think are ignored there.</p>

<p>First, I&#8217;m currently been working a great deal on compliance, so I&#8217;m
thinking of it as Role Separation. A User is a very specific role that
is very different from an Operator, or an Attacker, or even subclasses
of those (Store Operator versus System Operator versus Application
Operator).</p>

<p>Second, <a href="http://en.wikipedia.org/wiki/Linguistic_relativity">language affects the way we think</a>.
This is not new, this is not some crazy idea. We have so much baggage
with each term that already exists.</p>

<p>To me, a User Story is feature focused. It explores the Positive
Space. We could include the operational examples as part of
this. These are things we <em>want it to do</em>.</p>

<p>On the flip side, an Abuser Story is anti-feature focused. It explores
the Negative Space. It&#8217;s for things we <em>don&#8217;t want it to do</em>.</p>

<p>Judy Neher has a presentation at Agile 2012 for <a href="http://submit2012.agilealliance.org/node/13318">Abuser Stories: Thinking Like the Bad Guy to Reduce Security Vulnerabilities</a>.
I look forward to seeing what comes out of that.</p>

<p>Yes, I see the slippery slope that I&#8217;m on. We could get so prolific
that every type of story actor gets their own top level
classification. The User Stories approach does make you think through
the different roles that will use it, so all of the different top
level labels may be superfluous. There is validity to that
concern.</p>

<p>But with the baggage, I think that adding something with emphasis may
be necessary for a time. Until it&#8217;s widely accepted about bringing in
the negative space, I&#8217;m going to keep using the term Abuser Stories
(assuming I&#8217;m not treading to much on victims of violence&#8230;).</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[SOO: Pids over People]]></title>
    <link href="http://cmceniry.github.com/blog/2012/03/31/soo-pids-over-people/"/>
    <updated>2012-03-31T06:24:00-07:00</updated>
    <id>http://cmceniry.github.com/blog/2012/03/31/soo-pids-over-people</id>
    <content type="html"><![CDATA[<p>tl;dr</p>

<p>I come here not to <em>bury</em> NoOps, but to <em>praise</em> it.</p>

<ol>
<li>There are two extremes when it comes to service management: small
tight team doing Dev and Ops roles, and separate teams for Dev and
Ops. Both of these will exist at various times for various scope.
In the middle is confusion.</li>
<li>As Ops teams, we can enable Dev teams by providing them ways to
enable themselves. Let&#8217;s figure out how to provide XaaS
more. Infrastructure, Config/Deploy, Monitoring, etc. XaaS doesn&#8217;t
have to mean an API but it does mean a very predictable response.</li>
<li>As engineering(Dev+Ops) groups, we all like the idea of putting
together a project using a small/dedicated team with no
externalities. XaaS helps this to the degree that some items are
decoupled, but there&#8217;s a level of knowledge that XaaS can&#8217;t convey,
so let&#8217;s figure out how to make that happen.</li>
<li>No size fits all, so you have to constantly evaluate and bounce
back and forth on a service by service basis, and figure out how to
fill in gaps while you&#8217;re transitioning from one to the other.</li>
</ol>


<h3>Disclaimer</h3>

<p>Bias alert: I&#8217;m an Op, and there is a bit of frustration here (it
comes out as sarcasm). I like to think I&#8217;m opened minded but I am
being a bit irrational here.  so tread forward with that in mind. My
goal is to improve not justify myself.</p>

<p>And to be fair, this doesn&#8217;t just apply to Dev and Ops. It can also
apply to Sec, QA, Data Analysis, etc. It&#8217;s just a matter of how
coupled some of these are. DevOps is just on my radar, so that&#8217;s my
focus.</p>

<p>This is my first attempt at a longer form (almost 3x my previous
longest post). I&#8217;m attempting to make it not sound like a load of
stream of consciousness dribble, so&#8230; be gentle.</p>

<h3>References</h3>

<p>There&#8217;s been a lot of talk about DevOps and NoOps over the past
week. I can&#8217;t say how it started, so I&#8217;ll pick it up with
<a href="http://perfcap.blogspot.com/2012/03/ops-devops-and-noops-at-netflix.html">Cockcroft</a>.
It&#8217;s a nice piece on how Netflix does their internal product
development (lots of automation and relying on services instead of
groups - <em>remember this part</em>). There&#8217;s some commentary over the
terms. I probably have the same reaction to it as
<a href="https://gist.github.com/2140086">Allspaw</a> does, but similar
<a href="http://blog.ingineering.it/post/19383804543/devops-vs-noops-misses-the-point">to</a>
<a href="http://www.edwardcapriolo.com/roller/edwardcapriolo/entry/noops_devops_yesdilusional_no_it">others</a>,
I don&#8217;t think operational aspects are going to go away. And Cockcroft
even follows up with &#8220;I think we agree to call it PaaS,&#8221; so it&#8217;s not
so much about the terms.</p>

<p>To spell it out, there&#8217;s 2 threads here:</p>

<ol>
<li>There is a move to use services (i.e. APIs, XaaS)</li>
<li>You can&#8217;t get rid of operational concerns, but you may have to
focus the resources differently.</li>
</ol>


<p>I don&#8217;t think people will argue with the later, so I want to know what
the former means. I&#8217;m starting with how I saw it come about.</p>

<h3>The DevOps/Dev Ops Cycle</h3>

<p>I think a lot of organizations follow a similar pattern:</p>

<p>Small team develops a platform and people wear the dev and ops
hats. Platform grows and gets too big for a small team to manage. The
team is spending too much time fire fighting and in operational
aspects, so they specialize. Eventually, you end up with a Dev side
and Ops side which are (or have grown to be) completely different
people. The smart (and humble) ones feel like it&#8217;s too disjointed and
don&#8217;t feel like they can move the organization (too big, too much
inertia), so they splinter off on a skunksworks project with a small
team. The smart but not humble ones just see the other side as a bunch
of oafs, so they splinter off on a skunksworks project with a small
team.</p>

<p>Repeat ad nasuem.</p>

<p>The pendulum swings back and forth. Is this the way it has to be?</p>

<p>Going back to Allspaw:</p>

<pre><code>Etsy has an Operations org, people with "Operations" in their
title, and yet don't have a culture of red tape like you
describe. The premise you're implying doesn't exist here (that Ops
are grumpy people that say no all the time and are a source of
frustration and holdups) and I'm willing to bet it's the same in
other companies.
</code></pre>

<p>I&#8217;m probably not as optimistic as I think Allspaw is about the number
of companies, but there certainly are some. He continues:</p>

<pre><code>My definition of Ops involves the responsibility to make it safe
to make whatever change to production is necessary, at the rate
that it is necessary for the business to evolve.
</code></pre>

<p>There&#8217;s a bit of paternalism here, but I will conceed that for
recognizing that we&#8217;re enabling for a goal here. That goal is one that
allows anyone who needs to to make changes (i.e. contribute) to
production while at the same time taking out precautions against
issues that may crop up due to those changes.</p>

<p>Alas, I think some devs just don&#8217;t see this and instead have to deal
with Ops groups that can&#8217;t respond to their needs. It&#8217;s not
necessarily a problem with the Ops team, but that the Dev sees the Ops
as a roadblock. Yea, sometimes the Ops teams is just lacking. Other
times, it&#8217;s overwhelmed as it has to respond to everyone else and
can&#8217;t focus on its needs looking forward. And I have to mention those
Devs that just don&#8217;t give a damn and are going to do it their way come
hell or high water.</p>

<p>So, they turn the cycle around again and toss the baby (operational
experience) with the bath water (unresponsive ops team). They go
looking for ops sides (XaaS) that can respond - even if it is in a
limited way, and not a way that is tailored to them. They adapt their
processes to work within the framework that at least gives them some
predictability and how they want it.</p>

<h3>#NoPeople</h3>

<p>(Apologies to Cockcroft here. I&#8217;ve respected him since his
VirtualAdrian days but this may not being completely fair to him.)</p>

<p>Cockcroft&#8217;s article is littered with this pattern:</p>

<pre><code>Individual Cassandra clusters are automatically created by Priam,
and it's trivial for a developer to create their own cluster of
any size without assistance (NoOps again).
</code></pre>

<p>&#8220;Without assistance&#8221; - no people.</p>

<pre><code>...we have hundreds of developers using NoOps to get their code
and datastores deployed in our PaaS and to get notified directly
when something goes wrong.
</code></pre>

<p>&#8220;Developers&#8230; get notified directly&#8221; - no people.</p>

<pre><code>...no need for the developers to interact with ops people to get
things done.
</code></pre>

<p>&#8220;No need&#8230; to interact&#8221; - no people.</p>

<p>I&#8217;m not sure if #NoOps is the right hash or #NoPeople is. Yes, the dev
is involved but not in all cases:</p>

<pre><code>We have built tooling that removes many of the operations tasks
completely from the developer.
</code></pre>

<p>I have to read from that that the real goal is to completely remove
people from the picture. That&#8217;s not necessarily a bad thing. Good
automation has always been a goal of any real (Ops?) organization
worth its salt, even with the ever present
worry-about-automating-yourself-out-of-a-job thought process. But this
isn&#8217;t strictly about automation. It&#8217;s about removing roadblocks or
unpredictables out of the equation. It&#8217;s about taking <em>other</em> people
out of the picture. Let&#8217;s call-a-spade-a-spade.</p>

<p>&lt;pithydiversion&gt; Let me flip it around. Here&#8217;s my next user
story: As an Op, I would like an automation button for a feature
change instead of having to explain it to a developer, and then get it
into their backlog, get it prioritized, get it implemented, tested,
and then eventually released to me to be rolled out (with
documentation?). I would be claiming ownership over #NoDev, but I
think @DEVOPS_BORAT has beaten me to <a href="https://twitter.com/#!/DEVOPS_BORAT/status/108335303382663169">that</a>.
&lt;/pithydiversion&gt;</p>

<h3>SOO or OaaS or PoP</h3>

<p>So, we keep replacing people with some service or API, and lead to the
logical conclusion is that people no longer interact with each other;
instead, we interact with whatever service or API that someone else
has offered. I&#8217;m not sure if this is:</p>

<ul>
<li>Service Oriented Organization</li>
<li>Organization as a Service</li>
<li>Processes(pids) over People</li>
</ul>


<p>To be fair, I have to say that I do appreciate this approach from an
actual service offering. I have to give a nod to
<a href="https://plus.google.com/112678702228711889851/posts/eVeouesvaVX">Yegge</a>
here. It shouldn&#8217;t surprise us that we&#8217;re doing the same thing with
the organization as we are with our service components.</p>

<p>The ultimate form of the Dev/Ops divide is using a separate service
just as you would use an API. Of course, that&#8217;s only a divide around
one factor (infrastructure versus platform, platform vs app, etc). As
has been said before &#8220;AWS becomes your Ops team.&#8221;</p>

<p>This is efficient, right? Maybe, but that&#8217;s not what&#8217;s getting to
me. Why does it bother me? There&#8217;s two reasons.</p>

<h3>The Agile Manifesto Doublestandard</h3>

<p>As an Op, I feel like there&#8217;s a double standard here. For 10 years,
we&#8217;ve been hearing how Agile was supposed to fix the problems between
Product Management and the Development sides of the organization. The
key has been interaction and adaptability because predictability has
always been lacking.</p>

<pre><code>People over Process.
</code></pre>

<p>The downside has been that since you&#8217;re going for these short
interations, any externality can totally derail your sprint.</p>

<p>So, when interacting with an under-responsive Ops organization, the
Devs just see them as a roadblock, not as something to work with. (I&#8217;m
projecting:)</p>

<pre><code>Screw people over process. We want process over people if process
is more predictable.
</code></pre>

<h3>Masters of our own Destiny</h3>

<p>I used to think that it really came down to control. Everyone wants to
be in control. Ops want to be in control of production. Dev was to be
in control of the service. That&#8217;s not the real case (well, it is in
some highly disfunctional people).</p>

<p>&lt;rant&gt;I believe that I want to work in an organization that is full of
people respecting each other. Maybe I&#8217;m being naive - it&#8217;s a
dog-eat-dog business world.</p>

<p>Well, if that&#8217;s the case, <a href="http://www.youtube.com/watch?v=35TbGjt-weA">fuck that</a>.</p>

<p>Since I&#8217;m not going to conceed that quickly, I&#8217;m going to stick with
my naivety and plow forward.&lt;/rant&gt;</p>

<p>I think it&#8217;s more about being MoooDy - Masters of our own Destiny. I
think we&#8217;re climbing Mazlow&#8217;s pyramid to self-actualization, even if
we don&#8217;t realize or acknowledge it.</p>

<p>The key from that is being able to work together better, and part of
that is for the Ops side to deliver in a predictable manner (be it
manually, or automatically) to help Devs reach the top of that
pyramid.</p>

<h3>People are not pids</h3>

<p>The second reason is as simple the fact that people are not pids. A
service is ideally (warning: SOA and Unix mentality here) meant to do
one thing and do it well. A person on the other hand usually
doesn&#8217;t. In fact, if there&#8217;s a person who does, it&#8217;s not that way
for long. He quickly becomes obsolete and the rest of us move on.</p>

<p>Author Unknown (though I heard it from Harvey Mackay):</p>

<pre><code>Amateurs practice till they get it right. Professionals practice
until they can't get it wrong.
</code></pre>

<p>You can&#8217;t ditch people with Ops experience without taking the
hit. You can recover from that, but it&#8217;s still a hit. You want to
preserve the focus and practice.</p>

<p>There&#8217;s only so much that services at this time can do. They have to
completely evolve. And while they&#8217;re evolving, you want good people to
be able to fill in the gaps.</p>

<h3>The in-house trap</h3>

<p>I think there&#8217;s a case that demonstrates the above for the
process.</p>

<p>Consider that an in-house infrastructure team does its job well. It&#8217;s
listened to development, and provides a beautiful IaaS interface and a
beautiful Deployment-aaS interface. If the process doesn&#8217;t change (for
even something as insignificant as if the developer <em>doesn&#8217;t like
it</em>), it&#8217;s started to be seen as unresponsive just as Ops teams in the
past have been seen. Development&#8217;s immediately found a reason for
going with some other service (i.e. some other &#8220;Ops&#8221; team). Another
skunkworks project is started and we spin the cycle once again.</p>

<p>This turns into a catch-22 if the service couldn&#8217;t change because it
was servering Development on the whole but there&#8217;s even one dev
breaking from the herd. Given that organizational issues run deeper
than any Dev/Ops devide, what are the chances of that?</p>

<h3>Coupling trap</h3>

<p>SOA/XaaS works well when there&#8217;s a loosely decoupled aspect to
everything. Once that goes out the window, the level of complexity
goes off the rails.</p>

<p>Likewise, XaaS works well when it&#8217;s loosely decoupled.</p>

<p>For example, consider an PaaS/IaaS. A running application is heavily
dependent upon the system it runs on. Libraries have to be installed,
and they need to match version (and get updated hand-in-hand). Kernel
APIs have to match up, or at least behave similarily. It&#8217;s hard to
decouple apps from the underlying system. So, creating a PaaS there
(or IaaS if you want to see it that way) can run into some edge cases
that make it very tricky (repeat the in-house trap).</p>

<h3>#DevOps</h3>

<p>So, there are cases when XaaS doesn&#8217;t cut it. What do you do? Mix the
roles in with who&#8217;s doing them, which leads me to DevOps.</p>

<p>There&#8217;s a bunch of commentary on it, so I won&#8217;t rehash that. Suffice
to say that people have to handle both dev and ops
responsibilities. This can be either in the Dev part of the
organization (e.g. responsible for running a customer facing service),
or it can be in the Ops part of the organization (e.g. responsible for
running an internal customer facing service).</p>

<p>Well, this can have it&#8217;s own problems. Consider compliance. There are
compliance standards that require a separation of Ops from Dev. I have
no idea how to approach this one, but any devops move or adding
self-service seems to fly against this. But it remains a piece that
has to be accounted for. If someone can explain to me how any of this
can be PCI approved without the separation of duties, I&#8217;d be eternally
grateful&#8230;</p>

<p>You also have to consider the scaling cases. Services grow, teams
grows, and as we approach communication issues, we have to fragment
them. Sometimes you fragment the service; sometimes you fragment the
teams.</p>

<h3>Service Catalog and Service Lifecycle Management</h3>

<p>So, when you&#8217;re back to Dev and Ops and don&#8217;t have an XaaS setup yet?</p>

<p>ITIL (&lt;groan&gt; - hear me out) has an idea of a <a href="http://www.knowledgetransfer.net/dictionary/ITIL/en/Service_Catalog.htm">Service Catalog</a>.</p>

<p>It&#8217;s basically a menu of what the IT organization provides you. It&#8217;s
not specific about whether this be provided by people or by an
automated process or by self-service. The key is to define it in
business terms and include costs and SLAs.</p>

<p>In addition, there&#8217;s the Service Lifecycle Management. It basically
handles how new service offerings roll in, or more useful to this
discussion, how service offerings evolve. This provides the
adaptation that is required. As the service matures, it natually moves
out from being a human led service and into a XaaS led service.</p>

<p>There&#8217;s something to be said for Lean and just in time service
delivery, but I&#8217;m just not articulate enough to incorporate that in
yet.</p>

<p>The key here is that it doesn&#8217;t have to be an API. Though, I do have
to conceed, an API usually has a very well defined (though maybe not
documented) service catalog. Can&#8217;t really beat that.</p>

<p>And yes, I&#8217;m bringing ITIL in here. Whether you agree with the full
stack or not, there are some useful parts of it.</p>

<h3>The spectrum</h3>

<p>On one side you have small tight teams. On the other side, you have
separate and efficient Devs and Ops teams (with a XaaS being a valid
form there). In the middle is&#8230; muck. It&#8217;s where you don&#8217;t want to
be. You want to go one way or the other. Both sides can exist at the
same time, but they need to be distinctively on the sides, not
averaging in the middle. How do you get there?</p>

<p>To get to DevOps, you move your teams so that you&#8217;re embedding
functionality around various services. This means pulling people out
of their traditional comfort zones and putting them into something
that rounds them out.</p>

<p>To get to Dev and Ops, you have to put together a good service
catalog. You can either spell it out with people, or by figuring out
how to create some sort of XaaS offering. Ironically (or not?), that
XaaS offering&#8217;s team will probably start off looking like a DevOps
team (hence why both sides of the spectrum can exist at once).</p>

<p>In all of these cases, we&#8217;re talking about real people and these
decisions have consequences. We have to remember that and go back to
the Agile motto of &#8220;People over Process.&#8221; So, above all you have to
have honest communication as what&#8217;s needed, what&#8217;s missing, and what&#8217;s
open to be experimented with.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ANCL: Application Network Communication Language]]></title>
    <link href="http://cmceniry.github.com/blog/2012/03/26/ancl-application-network-communication-language/"/>
    <updated>2012-03-26T20:16:00-07:00</updated>
    <id>http://cmceniry.github.com/blog/2012/03/26/ancl-application-network-communication-language</id>
    <content type="html"><![CDATA[<p>I&#8217;m starting a new project aimed at handling firewall policies in a
sane way. Well, it&#8217;s not so much the firewall policies themselves, as
it about how we think about the firewall policies, or more precisely,
about how we think about the application policies themselves.</p>

<p>All firewall configurations that I&#8217;ve been part of have come about in
a specific pattern:</p>

<ol>
<li>Someone writes an application, and puts together some documentation
that, if we&#8217;re lucky, includes a visio of how the application
talks. Most of the time, it&#8217;s something closer to a &#8220;open these ports
on your firewall to make this happen.&#8221;</li>
<li>A sysadmin/app engineer/gwmth(guy who makes things happen - some
future post) looks over the documentation and identifies specific
hosts (IPs really) based on where the app components are running. He
puts together a ticket asking for specific ports to be open for
specific IPs or ranges. If you&#8217;re lucky (I&#8217;ll admit, I&#8217;ve been that
lazy admin), the admin puts together a visio of how it is all laid
out.</li>
<li>A netadmin takes the rules from the sys/app admin, tries to match
them up to existing rules or network ranges and adds them to the
firewall. If it&#8217;s not a stateful device, it&#8217;s worse than that as
you&#8217;re limited by the language.</li>
</ol>


<p>So, we&#8217;ve got a little game of operator going on here. On top of that,
usually the only permanent records of the change show up in two
places: any ticketing system, and the firewall itself. This means that
to try to figure out what happened, you have to go sort through
tickets or reverse engineer it from the firewall itself.</p>

<p>If you&#8217;ve ever had to deal with this, you end up having to reverse
engineer it all the time.</p>

<p><strong>This doesn&#8217;t work.</strong></p>

<p>There&#8217;s now <a href="http://www.redsealnetworks.com/">tools</a> that will help
you with this, be more efficient at it. They look at all of the rules
and you can go back and check to see what&#8217;s approved for what. But the
modelling is still done on a &#8220;this IP has access via this port to this
other IP, and this collection of IPs/ports are this model.&#8221; But it&#8217;s
still approaching it the wrong way - and if you&#8217;re more efficient at
doing the wrong thing, you&#8217;re just doing it wronger.</p>

<p>These tools do other things, but from an application perspective,
they&#8217;re very late in the game. So, late that it feels like we&#8217;re doing
network management backwards. I think we gotta go back to the
beginning. Instead of focusing on the network and building rules from
there, I want to start with the application and derive the rules from
there.</p>

<p>And yes, before we go there, documentation is good. I&#8217;m not trying to
give people a pass on the documentation. I&#8217;m trying to find a way that
makes it easier to document. So, keep that in mind.</p>

<p>Imagine that when you write an application, you can also easily
identify what network communication is needed relative to the
components for you application. For example, look at a simple LAMP
application. It fundamentally, has 3 components:</p>

<ol>
<li>the Database,</li>
<li>the Web Server, and</li>
<li>the web site consumers.</li>
</ol>


<p>And we can readily identify what access is needed:</p>

<ol>
<li>The <strong>Web Server</strong> needs access to the <strong>Database</strong> on port
<strong>3306</strong>.</li>
<li><strong>Web site consumer</strong>s need access to the <strong>Web Server</strong> on port
<strong>80</strong>.</li>
</ol>


<p>It&#8217;s fundamentally &#8220;X needs access to Y on port P&#8221; or if you want to
move it around &#8220;X is allowed on port P to Y&#8221; or &#8220;X is allowed P to Y.&#8221;
If you&#8217;ve done any access control before, you&#8217;ll notice the same
pattern of Actor(X), Resource(Y), and Permission(P).</p>

<p>I think there&#8217;s something about this that can be done
<a href="http://en.wikipedia.org/wiki/Security_Assertion_Markup_Language">SAML</a>,
but its focus is on the individual&#8217;s identity and access
control. Maybe there&#8217;s something I&#8217;m missing, but if I am, <a href="https://www.google.com/search?q=don't+understand+saml">I don&#8217;t
think I&#8217;m in the minority</a>.</p>

<p>So, we have a general form for recording the policy. There&#8217;s also the
other key take away from this one in that we&#8217;re not dealing with
IPs. Nowhere above is an IP listed. We&#8217;re talking about components
(Actors and Resources). This could take the form of:</p>

<pre><code>{'MyWebSiteModel':
  [
    'WebServer': 'DB:3306/tcp',
    'WebSiteUser': 'WebServer:80/tcp'
  ]
}
</code></pre>

<p>This is just the general description. It&#8217;s still not very useful. To
do that we have to instantiate it - basically, assign hosts/IPs to
each of the components:</p>

<pre><code>{'MyWebSiteInstance':
  'Model': 'MyWebSiteModel',
  'Components': {
    'DB': ['2.2.2.2'],
    'WebServer': ['1.1.1.1', 'web2.mydomain.com'],
    'WebSiteUser': ['0.0.0.0']
  }
}
</code></pre>

<p>Based on all of that information, you can form the rules that would be
needed to fit any firewall.</p>

<p>How does this address my initial problem? It comes down to fitting the
abstraction model to the handoff points:</p>

<ol>
<li>Application Developer: Generates the components and communication
patterns.</li>
<li>Application Administrator: Instantiates and assigns specific IPs or
hosts to each of the components.</li>
<li>Network Administrator: Gets a concise description to work from. If
the right amounnt of automation is applied, I might be marginalizing
the network admin for this task (that&#8217;s not completely true - there&#8217;s
plenty of sites that have enough device complexity that no simple
model will be immediately applicable - but it could still be used as a
starting point)..</li>
</ol>


<p>The model I used above is overtly simple. I already have questions
around RPCs, dynamic ranges, encapsulated protocols (* over http,
anyone?). I&#8217;m only starting the discussion here and dealing with the
minimal accomplishable step. It&#8217;s something to build on.</p>

<p>Now for the practical hand waving. The follow up pieces to this are
the tools to make it useful. We still need:</p>

<ul>
<li>A tool for recording this. This could be done via the above forms,
but it&#8217;d be nice to have it wrapped up in a bow. This is doubly
desired when we have to consider how all of the policies are
instantiated with the specific host information.</li>
<li>A tool for visualizing. It&#8217;d take in the general descriptions, and
show a pretty display for it.</li>
<li>A tool for converting the models to rules. It would take in the
general descriptions, the specific host information for each
instantiation, and then outputs some for iptables, pf, acls,
firewall policies, etc. Yeah, some magic here.</li>
</ul>


<p>So, first things being first, my <a href="http://github.com/cmceniry/ancl">next project</a>
is something for tracking.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Carbonite CEO on Rush Limbaugh]]></title>
    <link href="http://cmceniry.github.com/blog/2012/03/04/carbonite-ceo-on-rush-limbaugh/"/>
    <updated>2012-03-04T14:38:00-08:00</updated>
    <id>http://cmceniry.github.com/blog/2012/03/04/carbonite-ceo-on-rush-limbaugh</id>
    <content type="html"><![CDATA[<p>Whether you sit on the Left or the Right, or the left or the right, or
the middle, or the Middle, or underneath it all or wherever, I would
really appreciate if the discourse that we had didn&#8217;t resolve to
namecalling based on ignorance. I know that that doesn&#8217;t help get
money<sup>Wsupport</sup> for elections, but it keeps me from adding to the
&#8220;Don&#8217;t want to live on this planet anymore&#8221; meme. If you don&#8217;t
understand how that&#8217;s connected, please read
<a href="http://www.amazon.com/Republic-Lost-Money-Corrupts-Congress/dp/0446576433">Lessig</a>.</p>

<p>So, it makes me feel good to see that
<a href="http://www.carbonite.com/en/blog/A-Message-from-Carbonite-CEO-David-Friend-Regarding-Ads-on-Limbaugh">Carbonite</a>,
not only pulled their support for Limbaugh, but also will not continue
even in light of Limbaugh&#8217;s apology. Given multiple hyperbolic
statements by Limbaugh in the past, I don&#8217;t feel any sincerity. On the
other hand, I feel that Friend is sincere:</p>

<pre><code>“No one with daughters the age of Sandra Fluke, and I have two,
could possibly abide the insult and abuse heaped upon this
courageous and well-intentioned young lady. Mr. Limbaugh, with his
highly personal attacks on Miss Fluke, overstepped any reasonable
bounds of decency. Even though Mr. Limbaugh has now issued an
apology, we have nonetheless decided to withdraw our advertising
from his show. We hope that our action, along with the other
advertisers who have already withdrawn their ads, will ultimately
contribute to a more civilized public discourse.”
</code></pre>

<p>But even if I assume it&#8217;s a marketing move, it&#8217;s a marketing move that
puts the discussion in the right direction.</p>

<p>Friend is putting his money where his mouth is; I think I have to do
so as well (even if I don&#8217;t have a completely good use case for it for
me).</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Enterprise: Coda]]></title>
    <link href="http://cmceniry.github.com/blog/2012/03/04/enterprise-coda/"/>
    <updated>2012-03-04T14:29:00-08:00</updated>
    <id>http://cmceniry.github.com/blog/2012/03/04/enterprise-coda</id>
    <content type="html"><![CDATA[<p>I know I&#8217;m looking for confirmation bias here, but I think <a href="http://sethgodin.typepad.com/seths_blog/2012/03/why-lie.html">Seth
Godin</a>
does actually apply to my interactions with arrogant vendors.</p>

<pre><code>...when we clearly articulate why we're not going to do business, the
salesperson responds by questioning the judgment of the prospect.

...

Someone who chooses not to buy from you isn't stupid. They're not
unable to process ideas logically, nor are they unethical or
manipulated by others. No, it's simpler than that:

Given what they know and what they believe, the prospect is making
exactly the right decision.

We always make our decision based on what we know and
believe. That's a tautology, based on the definition... a decision
is the path you take based on what you know and believe, right?

The challenge, then, it seems to me, is to realize that perhaps
the prospect knows something you don't, or, just as likely,
doesn't believe what you believe. Your job as a marketer is to
figure out what your prospect's biases and worldview and fears and
beliefs are, and as a salesperson, your job is to help them know
what you know.
</code></pre>

<p>To Vendors: Rather than belittling what isn&#8217;t yours, how about you
talk about facts? I&#8217;m not an idiot who you can smokescreen, so don&#8217;t
waste our time doing that.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[In which Pooh is shown how 'Enterprise' can be a bug instead of a feature...]]></title>
    <link href="http://cmceniry.github.com/blog/2012/03/03/in-which-pooh-is-shown-how-enterprise-can-be-a-bug-instead-of-a-feature-dot-dot-dot/"/>
    <updated>2012-03-03T22:43:00-08:00</updated>
    <id>http://cmceniry.github.com/blog/2012/03/03/in-which-pooh-is-shown-how-enterprise-can-be-a-bug-instead-of-a-feature-dot-dot-dot</id>
    <content type="html"><![CDATA[<p>I was in a meeting the other day with a storage vendor selling their
wares. He asked what we had at the time, and I let him know, and was
extremely surprised by his response.</p>

<p>&#8220;We&#8217;re using X,&#8221; I said.</p>

<p>&#8220;Oh, well, that&#8217;s nice, but if you want an Enterprise solution, you
really need to be using ours,&#8221; he spouted off smuggly.</p>

<p>At which point, I had to say something. &#8220;It&#8217;s statements like that
that are why nobody likes [your company].&#8221;</p>

<p>My boss laughed, I think mostly to defuse it a bit, but he also said
&#8220;He&#8217;s not kidding.&#8221;</p>

<p>And I wasn&#8217;t. I really think that if you want to come into my house
and try to sell me something, the number one thing you do is not
insult me and what I currently have. At least, don&#8217;t try it until you
have an idea of how I feel about the solution. In this case, it wasn&#8217;t
that I was tied to it, but that that&#8217;s what we had, plain and simple.</p>

<p>The second thing that you may want to do is say something that
actually adds value, not just belittles the competition. Ok, so let&#8217;s
assume that Enterprise is a good thing - why is your solution more
Enterprise than what we have? In this case, he eventually added that
it was twice as fast as our current solution.</p>

<p>Which leads me to the third thing you may want to do. Don&#8217;t try to
sell on facts taken out of context. Ok, so it&#8217;s twice as fast. It&#8217;s
also 4 years newer technology. According to Moore&#8217;s Law applied to
storage, if you&#8217;re only twice as fast, you&#8217;re half or a quarter of
where you should be on the progression curve.</p>

<p>So, what does Enterprise mean? Based on the vendor comments, it&#8217;s:</p>

<ul>
<li>Better than what we have right now,</li>
<li>Just something we should trust the vendor on, and</li>
<li>Behind on the technology curve.</li>
</ul>


<p>Great sales job.</p>

<p>I think of the other &#8220;Enterprise&#8221; products that we have. Usually,
there&#8217;s one or more of the additional features:</p>

<ul>
<li>Complex licensing model - $ per core up to this rate, and then $$ per
core past that, but only if you have X amount of RAM, or it was
purchased on a Blue Moon.</li>
<li>Manual installation - It requires a GUI to install, can&#8217;t be
automated (even with something like a response file), and sometimes
you have to do parallel steps and hope that they don&#8217;t have race
conditions or start over when they do.</li>
<li>Inflexible - &#8220;You can do other things with it, but that would be a
custom setup and unsupported.&#8221;</li>
<li>Long patch cycles - This would be fine if we all didn&#8217;t already know
that half of what&#8217;s out there is commodity open source software. It
doesn&#8217;t matter you&#8217;ve wrapped it all up under an appliance bow -
it&#8217;s still vulnerable to whatever it is that the patch is for.</li>
<li>Lots of fingerpointing when it doesn&#8217;t interact correctly in my
owner situation or with other Enterprise software.</li>
</ul>


<p>So, what is Enterprise software? It can&#8217;t be software that we&#8217;re
paying for the quality of. What it really comes down to - it&#8217;s
software that we can outsource the blame to&#8230; if we&#8217;re lucky.</p>

<p>This doesn&#8217;t mean that there isn&#8217;t good Enterprise software out
there. Just means that what is good out there probably isn&#8217;t being
bought for the reasons that it&#8217;s being marketed for.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Bret Victor: Inventing on Principle]]></title>
    <link href="http://cmceniry.github.com/blog/2012/02/20/bret-victor-inventing-on-principle/"/>
    <updated>2012-02-20T11:38:00-08:00</updated>
    <id>http://cmceniry.github.com/blog/2012/02/20/bret-victor-inventing-on-principle</id>
    <content type="html"><![CDATA[<p>Watched a video there other day. It&#8217;s making it&#8217;s rounds on the
internet. It&#8217;s definitely worth watching:</p>

<ul>
<li><a href="http://vimeo.com/36579366">Inventing on Principle</a></li>
</ul>


<p>The key with it is to be mindful of what you&#8217;re doing when you start
to write something. Do something that matters - both from the
perspective of contributing to society, but also how it contributes to
society. Don&#8217;t just do something dumb that&#8217;s noble - make it awesome
and noble. At least, that&#8217;s what I got from it.</p>

<p>Makes me think of this blog post as well:</p>

<ul>
<li><a href="http://sethgodin.typepad.com/seths_blog/2012/01/who-cares.html">Who Cares?</a></li>
</ul>


<p>Those who care to put the finishing touches on something are the ones
who will do good things. Not necessarily the ones who will succeed or
excel (or appear to have excelled), but the ones who will have good
things to show.</p>

<p>Just food for thought.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Language matters: Nitpik with Chef]]></title>
    <link href="http://cmceniry.github.com/blog/2012/02/05/language-matters-nitpik-with-chef/"/>
    <updated>2012-02-05T23:14:00-08:00</updated>
    <id>http://cmceniry.github.com/blog/2012/02/05/language-matters-nitpik-with-chef</id>
    <content type="html"><![CDATA[<p>For a while now, Chef has bothered me. Some of it I can blame on the
server setup (pull/push and exposure of general manifests), but
there&#8217;s been something that&#8217;s been bothering that I hadn&#8217;t been able
to put my finger on&#8230; until now.</p>

<p>First, I&#8217;m going to come out and admit my bias to a declarative model
over an imperative model. I won&#8217;t go into why. Burgess does a much
better job <a href="http://cfengine.com/markburgess/blog_order.html">describing this</a>.</p>

<p>My issue with Chef comes down to one word: action.</p>

<pre><code>package "ntp" do
  action :install
end
</code></pre>

<p>Now, to be fair, this is a very declarative description. If you dig
into what it&#8217;s doing, you&#8217;ll find that it&#8217;s interrogating the system
and only installing the package if it needs to, or alternatively,
it&#8217;ll make sure that the package exists. If that&#8217;s the case, it&#8217;s not
&#8220;install&#8221;ing every time, it&#8217;s making sure it&#8217;s
&#8220;install&#8221;ed. &#8220;Install&#8221;ing is a verb (it&#8217;s saying &#8220;action&#8221;), but
&#8220;Install&#8221;ed is a noun (state).</p>

<p>Why does this matter? Let&#8217;s go back to cfengine:</p>

<pre><code>commands:
  "yum install -y ntp"
    ifvarclass =&gt; "!ntp_installed"
</code></pre>

<p>Now, we&#8217;re further down the slope. This is a command/verb/action -
there&#8217;s now way around that. We&#8217;ve detached the descriptive goal of
what we want from how we&#8217;ve written. We have to know that our
convention for an installed package is to use that command structure,
and to make sure there&#8217;s a class that checks for if ntp is installed
or not. The var is in the check, not in the overall description.</p>

<p>So, why is Puppet better?</p>

<pre><code>package { "ntp":
  ensure =&gt; present
}
</code></pre>

<p>There&#8217;s no confusion around this one. It&#8217;s clearly saying make sure
this package is present/installed. The magic of how that happens is in
the underlying resource abstraction layer, which is cool in and of
itself, but it&#8217;s real win is that it allows you to continue thinking
in a declarative way, not in an imperative way. There&#8217;s no mental
flipping back and forth.</p>

<p>Ok - so why does <em>that</em> matter?</p>

<p><a href="http://en.wikipedia.org/wiki/Linguistic_relativity">Language matters</a>.
Language influences the way you conceptualize a problem, plain and
simple. The BDD guys hark on this as well. I think for sysadmining
roles to move forward, we need to think in a declarative way. Yes,
there are times for an imperative method, but not in system
descriptions.</p>

<p>So, it&#8217;s a nitpik, but it&#8217;s one that can have far reaching impact.</p>

<p>And yes, I know you can do execs in Puppet, so you can shoot yourself
in the foot, but you&#8217;ll have less misfires with Puppet than with other
tools because of the way it makes you think.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[First post]]></title>
    <link href="http://cmceniry.github.com/blog/2012/01/29/first-post/"/>
    <updated>2012-01-29T16:44:00-08:00</updated>
    <id>http://cmceniry.github.com/blog/2012/01/29/first-post</id>
    <content type="html"><![CDATA[<p>Got <a href="http://octopress.org/">Octopress</a> up and running. I like the idea
of a staticly deployed blog using a simple wiki-like mark up
language. I lose comments, but part of me thinks that having a blog is
a minimum for participating in the discussion. It&#8217;s a bit much, but
I&#8217;ll wait to see if it becomes an issue and figure it out then. For
now, I have a blog, so I&#8217;m going to focus on the writing.</p>

<p>Ran into a few issues setting up Octopress - somewhat my own
fault. The first was that I switched from rvm to rbenv. Wasn&#8217;t really
an issue, but rvm feels more ready for prime time on OSX Lion. I had
trouble getting ruby to build, and had to switch from LLVM to GCC. I
would think that it shouldn&#8217;t matter, but it seems to. I
<a href="https://github.com/kennethreitz/osx-gcc-installer/downloads">kennethretiz&#8217;s prebuilt packages</a>
to be the best install.</p>

<p>After that, got to the point where I do &#8216;bundle install&#8217; from the
Octopress clone, and it started complaining about not finding
&#8216;stdio.h&#8217; when building fsevent_watch. <a href="https://github.com/imathis/octopress/issues/320">Others have seen this
before</a>, but really
the issue is being <a href="https://github.com/thibaudgg/rb-fsevent/issues/20">addressed</a>
by the fsevent gem. Ends up being some fun differences between LLVM
and GCC again. I switched over to the prebuilt fsevent gem, and that
worked. Just a simple change in &#8216;Gemfile&#8217;:</p>

<pre><code>gem 'rubypants'
-gem 'rb-fsevent'
+gem 'rb-fsevent', :git =&gt; 'git://github.com/ttilley/rb-fsevent.git', :branch =&gt; 'pre-compiled-gem-one-off'
gem 'stringex'
</code></pre>

<p>Those are the main build issues, but also ran into a couple of issues
working with Octopress.</p>

<p>The first usage issue is that I&#8217;m still trying to figure out the
overall git workflow. You do a clone of the Octopress repo, and then
work within that clone. This seems a bit unclean to me. I want to keep
my actual blog source and the Octopress source separate, even if the
Octopress source is tracking. Add to that that I&#8217;m sending the site up
to Github&#8217;s personal pages for hosting it, so that has its own
repo. Just seems like this will bite me at some point.</p>

<p>The second issue is just getting familiar with markdown. I&#8217;m finding
out some of its limits, like how it can&#8217;t embed block quotes inside
numbered items. Nothing major, just learning myself.</p>

<p>But, Octopress is up and running, and posting to the Intarwebs, so
that has to be considered a success. Now I get to move on to the real
content.</p>

<p>&#8211;mac</p>
]]></content>
  </entry>
  
</feed>
